<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="book.css">
    <title>Homeopathy Doctor Appointment</title>
</head>
<body>
    <header>
        <div class="book appoinment"></div>
        <img src="assets/appoinment.jpg.jpeg" alt="Dr. Ajay Sharma" width="150" height="150">
     <h1>Dr. Ajay Varma- B.H.M.S(MUHS)</h1>
        <p>Your health is our priority</p>
    </header>
        
    <main>
        <section class="appointment-form">
            <h2>Book an Appointment</h2>
            <form action="/submit-appointment" method="POST">
                <label for="name">Full Name:</label>
                <input type="text" id="name" name="name" required>

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>

                <label for="phone">Phone Number:</label>
                <input type="tel" id="phone" name="phone" required>

                <label for="date">Preferred Appointment Date:</label>
                <input type="date" id="date" name="date" required>

                <label for="time">Preferred Appointment Time:</label>
                <input type="time" id="time" name="time" required>

                <button type="submit">Book Appointment</button>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; Dr. Ajay Sharma. All rights reserved.</p>
    </footer>

    <form id="appointmentForm">
        <input type="text" id="name" placeholder="Your Name" required />
        <input type="email" id="email" placeholder="Your Email" required />
        <input type="date" id="date" required />
        <input type="time" id="time" required />
        <button type="submit">Book Appointment</button>
     </form>
     
     <script>
        document.getElementById('appointmentForm').addEventListener('submit', async (e) => {
            e.preventDefault(); // Prevent form submission
     
            const appointmentData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                date: document.getElementById('date').value,
                time: document.getElementById('time').value
            };
     
            try {
                const response = await fetch('http://localhost:5000/api/book-appointment', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(appointmentData)
                });
     
                if (response.ok) {
                    const result = await response.json();
                    alert(result.message); // Show success message
                } else {
                    alert('Failed to book appointment');
                }
            } catch (error) {
                console.error('Error booking appointment:', error);
                alert('Error booking appointment. Please try again.');
            }
        });
     </script>     
</body>
</html>
